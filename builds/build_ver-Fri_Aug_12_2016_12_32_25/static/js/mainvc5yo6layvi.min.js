this.createjs=this.createjs||{},function(){"use strict";function a(a){this.Container_constructor(),this.spriteSheet=a}var b=createjs.extend(a,createjs.Container);b.addChild=function(a){return null==a?a:arguments.length>1?this.addChildAt.apply(this,Array.prototype.slice.call(arguments).concat([this.children.length])):this.addChildAt(a,this.children.length)},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(c>2){for(var e=0;c-1>e;e++)this.addChildAt(arguments[e],d+e);return arguments[c-2]}if(!(a._spritestage_compatibility>=1))return console&&void 0,a;if(a._spritestage_compatibility<=4){var f=a.spriteSheet;if(!f||!f._images||f._images.length>1||this.spriteSheet&&this.spriteSheet!==f)return console&&void 0,a;this.spriteSheet=f}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a},b.toString=function(){return"[SpriteContainer (name="+this.name+")]"},createjs.SpriteContainer=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.Stage_constructor(a),this._preserveDrawingBuffer=b||!1,this._antialias=c||!1,this._viewportWidth=0,this._viewportHeight=0,this._projectionMatrix=null,this._webGLContext=null,this._webGLErrorDetected=!1,this._clearColor=null,this._maxTexturesPerDraw=1,this._maxBoxesPointsPerDraw=null,this._maxBoxesPerDraw=null,this._maxIndicesPerDraw=null,this._shaderProgram=null,this._vertices=null,this._verticesBuffer=null,this._indices=null,this._indicesBuffer=null,this._currentBoxIndex=-1,this._drawTexture=null,this._initializeWebGL()}[createjs.SpriteContainer,createjs.Sprite,createjs.BitmapText,createjs.Bitmap,createjs.DOMElement].forEach(function(a,b){a.prototype._spritestage_compatibility=b+1});var b=createjs.extend(a,createjs.Stage);a.NUM_VERTEX_PROPERTIES=5,a.POINTS_PER_BOX=4,a.NUM_VERTEX_PROPERTIES_PER_BOX=a.POINTS_PER_BOX*a.NUM_VERTEX_PROPERTIES,a.INDICES_PER_BOX=6,a.MAX_INDEX_SIZE=Math.pow(2,16),a.MAX_BOXES_POINTS_INCREMENT=a.MAX_INDEX_SIZE/4,b._get_isWebGL=function(){return!!this._webGLContext};try{Object.defineProperties(b,{isWebGL:{get:b._get_isWebGL}})}catch(c){}b.addChild=function(a){return null==a?a:arguments.length>1?this.addChildAt.apply(this,Array.prototype.slice.call(arguments).concat([this.children.length])):this.addChildAt(a,this.children.length)},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(c>2){for(var e=0;c-1>e;e++)this.addChildAt(arguments[e],d+e);return arguments[c-2]}return a._spritestage_compatibility>=1?!a.image&&!a.spriteSheet&&a._spritestage_compatibility<=4?(console&&void 0,a):(a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a):(console&&void 0,a)},b.update=function(a){if(this.canvas){this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart"),this.autoClear&&this.clear();var b=this._setWebGLContext();b?this.draw(b,!1):(b=this.canvas.getContext("2d"),b.save(),this.updateContext(b),this.draw(b,!1),b.restore()),this.dispatchEvent("drawend")}},b.clear=function(){if(this.canvas){var a=this._setWebGLContext();a?a.clear(a.COLOR_BUFFER_BIT):(a=this.canvas.getContext("2d"),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1))}},b.draw=function(a,b){return"undefined"!=typeof WebGLRenderingContext&&(a===this._webGLContext||a instanceof WebGLRenderingContext)?(this._drawWebGLKids(this.children,a),!0):this.Stage_draw(a,b)},b.updateViewport=function(a,b){this._viewportWidth=a,this._viewportHeight=b,this._webGLContext&&(this._webGLContext.viewport(0,0,this._viewportWidth,this._viewportHeight),this._projectionMatrix||(this._projectionMatrix=new Float32Array([0,0,0,0,0,1,-1,1,1])),this._projectionMatrix[0]=2/a,this._projectionMatrix[4]=-2/b)},b.clearImageTexture=function(a){a.__easeljs_texture=null},b.toString=function(){return"[SpriteStage (name="+this.name+")]"},b._initializeWebGL=function(){this._clearColor={r:0,g:0,b:0,a:0},this._setWebGLContext()},b._setWebGLContext=function(){return this.canvas?this._webGLContext&&this._webGLContext.canvas===this.canvas||this._initializeWebGLContext():this._webGLContext=null,this._webGLContext},b._initializeWebGLContext=function(){var a={depth:!1,alpha:!0,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias,premultipliedAlpha:!0},b=this._webGLContext=this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a);if(b){if(this._maxTexturesPerDraw=1,this._setClearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a),b.enable(b.BLEND),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this._createShaderProgram(b),this._webGLErrorDetected)return void(this._webGLContext=null);this._createBuffers(b),this.updateViewport(this._viewportWidth||this.canvas.width||0,this._viewportHeight||this.canvas.height||0)}},b._setClearColor=function(a,b,c,d){this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=c,this._clearColor.a=d,this._webGLContext&&this._webGLContext.clearColor(a,b,c,d)},b._createShaderProgram=function(a){var b=this._createShader(a,a.FRAGMENT_SHADER,"precision mediump float;uniform sampler2D uSampler0;varying vec3 vTextureCoord;void main(void) {vec4 color = texture2D(uSampler0, vTextureCoord.st);gl_FragColor = vec4(color.rgb, color.a * vTextureCoord.z);}"),c=this._createShader(a,a.VERTEX_SHADER,"attribute vec2 aVertexPosition;attribute vec3 aTextureCoord;uniform mat3 uPMatrix;varying vec3 vTextureCoord;void main(void) {vTextureCoord = aTextureCoord;gl_Position = vec4((uPMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);}");if(!this._webGLErrorDetected&&b&&c){var d=a.createProgram();if(a.attachShader(d,b),a.attachShader(d,c),a.linkProgram(d),!a.getProgramParameter(d,a.LINK_STATUS))return void(this._webGLErrorDetected=!0);d.vertexPositionAttribute=a.getAttribLocation(d,"aVertexPosition"),d.textureCoordAttribute=a.getAttribLocation(d,"aTextureCoord"),d.sampler0uniform=a.getUniformLocation(d,"uSampler0"),a.enableVertexAttribArray(d.vertexPositionAttribute),a.enableVertexAttribArray(d.textureCoordAttribute),d.pMatrixUniform=a.getUniformLocation(d,"uPMatrix"),a.useProgram(d),this._shaderProgram=d}},b._createShader=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(this._webGLErrorDetected=!0,null)},b._createBuffers=function(b){this._verticesBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this._verticesBuffer);var c=4*a.NUM_VERTEX_PROPERTIES;b.vertexAttribPointer(this._shaderProgram.vertexPositionAttribute,2,b.FLOAT,b.FALSE,c,0),b.vertexAttribPointer(this._shaderProgram.textureCoordAttribute,3,b.FLOAT,b.FALSE,c,8),this._indicesBuffer=b.createBuffer(),this._setMaxBoxesPoints(b,a.MAX_BOXES_POINTS_INCREMENT)},b._setMaxBoxesPoints=function(b,c){this._maxBoxesPointsPerDraw=c,this._maxBoxesPerDraw=this._maxBoxesPointsPerDraw/a.POINTS_PER_BOX|0,this._maxIndicesPerDraw=this._maxBoxesPerDraw*a.INDICES_PER_BOX,b.bindBuffer(b.ARRAY_BUFFER,this._verticesBuffer),this._vertices=new Float32Array(this._maxBoxesPerDraw*a.NUM_VERTEX_PROPERTIES_PER_BOX),b.bufferData(b.ARRAY_BUFFER,this._vertices,b.DYNAMIC_DRAW),this._indices=new Uint16Array(this._maxIndicesPerDraw);for(var d=0,e=this._indices.length;e>d;d+=a.INDICES_PER_BOX){var f=d*a.POINTS_PER_BOX/a.INDICES_PER_BOX;this._indices[d]=f,this._indices[d+1]=f+1,this._indices[d+2]=f+2,this._indices[d+3]=f,this._indices[d+4]=f+2,this._indices[d+5]=f+3}b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this._indices,b.STATIC_DRAW)},b._setupImageTexture=function(a,b){if(b&&(b.naturalWidth||b.getContext||b.readyState>=2)){var c=b.__easeljs_texture;return c||(c=b.__easeljs_texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),c}},b._drawWebGLKids=function(b,c,d){for(var e,f,g=this.snapToPixelEnabled,h=null,i=0,j=0,k=0,l=0,m=this._vertices,n=a.NUM_VERTEX_PROPERTIES_PER_BOX,o=a.MAX_INDEX_SIZE,p=this._maxBoxesPerDraw-1,q=0,r=b.length;r>q;q++)if(e=b[q],e.isVisible()){var h=e.image||e.spriteSheet&&e.spriteSheet._images[0],s=h.__easeljs_texture;if(s||(s=this._setupImageTexture(c,h))){f=e._props.matrix,f=(d?f.copy(d):f.identity()).appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY);var t=0,u=1,v=0,w=1;if(4===e._spritestage_compatibility)i=0,j=0,k=h.width,l=h.height;else if(2===e._spritestage_compatibility){var x=e.spriteSheet.getFrame(e.currentFrame),y=x.rect;i=-x.regX,j=-x.regY,k=i+y.width,l=j+y.height,t=y.x/h.width,v=y.y/h.height,u=t+y.width/h.width,w=v+y.height/h.height}else h=null,3===e._spritestage_compatibility&&e._updateText();if(!d&&e._spritestage_compatibility<=4&&s!==this._drawTexture&&(this._drawToGPU(c),this._drawTexture=s),null!==h){var z=++this._currentBoxIndex*n,A=f.a,B=f.b,C=f.c,D=f.d,E=f.tx,F=f.ty;g&&e.snapToPixel&&(E=E+(0>E?-.5:.5)|0,F=F+(0>F?-.5:.5)|0),m[z]=i*A+j*C+E,m[z+1]=i*B+j*D+F,m[z+5]=i*A+l*C+E,m[z+6]=i*B+l*D+F,m[z+10]=k*A+l*C+E,m[z+11]=k*B+l*D+F,m[z+15]=k*A+j*C+E,m[z+16]=k*B+j*D+F,m[z+2]=m[z+7]=t,m[z+12]=m[z+17]=u,m[z+3]=m[z+18]=v,m[z+8]=m[z+13]=w,m[z+4]=m[z+9]=m[z+14]=m[z+19]=e.alpha,this._currentBoxIndex===p&&(this._drawToGPU(c),this._drawTexture=s,this._maxBoxesPointsPerDraw<o&&(this._setMaxBoxesPoints(c,this._maxBoxesPointsPerDraw+a.MAX_BOXES_POINTS_INCREMENT),p=this._maxBoxesPerDraw-1))}e.children&&(this._drawWebGLKids(e.children,c,f),p=this._maxBoxesPerDraw-1)}}d||this._drawToGPU(c)},b._drawToGPU=function(b){if(this._drawTexture){var c=this._currentBoxIndex+1;b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this._drawTexture),b.uniform1i(this._shaderProgram.sampler0uniform,0),b.bindBuffer(b.ARRAY_BUFFER,this._verticesBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indicesBuffer),b.uniformMatrix3fv(this._shaderProgram.pMatrixUniform,!1,this._projectionMatrix),b.bufferSubData(b.ARRAY_BUFFER,0,this._vertices),b.drawElements(b.TRIANGLES,c*a.INDICES_PER_BOX,b.UNSIGNED_SHORT,0),this._currentBoxIndex=-1,this._drawTexture=null}},createjs.SpriteStage=createjs.promote(a,"Stage")}();var events={events:{},on:function(eventName,fn){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(fn)},off:function(eventName,fn){if(this.events[eventName])for(var i=0;i<this.events[eventName].length;i++)if(this.events[eventName][i]===fn){this.events[eventName].splice(i,1);break}},trigger:function(eventName,data){for(var _len=arguments.length,rest=Array(_len>2?_len-2:0),_key=2;_len>_key;_key++)rest[_key-2]=arguments[_key];this.events[eventName]&&this.events[eventName].forEach(function(fn){fn(data,rest)})}},autoplay=function(){function initAutoplay(count){autoCount=count,autoEnd=!1}function startAutoplay(){autoCount--,autoEnd||spin.spinStart(!0),autoCount>0?buttons.changeAutoText(autoCount):events.trigger("stopAutoplay")}function stopAutoplay(){autoEnd=!0,lines.clearAutoTimer()}var autoCount=void 0,autoEnd=void 0;return events.on("initAutoplay",initAutoplay),events.on("startAutoplay",startAutoplay),events.on("stopAutoplay",stopAutoplay),{initAutoplay:initAutoplay,startAutoplay:startAutoplay,stopAutoplay:stopAutoplay}}(),utils=function(){function request(name,path){return new Promise(function(resolve,reject){$.ajax({url:""+serviceUrl+name+path,dataType:"JSONP",type:"GET",success:resolve,error:reject})})}function getData(data){if("undefined"!=typeof data)return data;throw new Error("Data is undefined!")}var serviceUrl="http://gameservice.bossgs.org/slot/SlotService.svc/";return{request:request,getData:getData}}(),bg=function(){function drawBG(queue){var bgStaticStage=canvas.getStages().bgStaticStage,gameStaticStage=canvas.getStages().gameStaticStage,mainBG=new createjs.Bitmap(queue.getResult("mainBG")).set({name:"mainBG"}),gameBG=new createjs.Bitmap(queue.getResult("gameBG")).set({x:98,y:50,name:"gameBG"}),gameMachine=new createjs.Bitmap(queue.getResult("gameMachine")).set({x:6,y:5,name:"gameMachine"}),footerBG=new createjs.Bitmap(queue.getResult("footerBG")).set({y:680,name:"footerBG"});bgStaticStage.addChildAt(mainBG,gameBG,0),gameStaticStage.addChildAt(gameMachine,footerBG,0),bgStaticStage.update(),gameStaticStage.update()}return events.on("preloadComplete",drawBG),{}}(),balance=function(){function initBalance(allData){balanceStage=canvas.getStages().gameStaticStage,balanceData.linesLength=allData.lines.length;var data=allData.balance;balanceData.coinsSteps=data.CoinValue.map(function(element){return+(element/100).toFixed(2)}),balanceData.betSteps=data.BetLevel,balanceData.coinsValue=balanceData.coinsSteps[0],balanceData.coinsSum=data.ScoreCoins,balanceData.coinsCash=+(data.ScoreCents/100).toFixed(2),balanceData.betValue=balanceData.betSteps[0],balanceData.betSum=+(balanceData.betValue*balanceData.linesLength).toFixed(0),balanceData.betCash=+(balanceData.betSum*balanceData.coinsValue).toFixed(2),balanceData.winCash=0..toFixed(2),balanceData.currency=data.Currency,writeBalance()}function writeBalance(){balanceText.coinsSum=new createjs.Text(balanceData.coinsSum,parameters.font,parameters.color).set(parameters.coinsSum),balanceText.coinsCash=new createjs.Text(balanceData.coinsCash,parameters.font,parameters.color).set(parameters.coinsCash),balanceText.betSum=new createjs.Text(balanceData.betSum,parameters.font,parameters.color).set(parameters.betSum),balanceText.betCash=new createjs.Text(balanceData.betCash,parameters.font,parameters.color).set(parameters.betCash),balanceText.winCash=new createjs.Text(balanceData.winCash,parameters.font,parameters.color).set(parameters.winCash),balanceContainer.addChild(balanceText.coinsSum,balanceText.coinsCash,balanceText.betSum,balanceText.betCash,balanceText.winCash),balanceStage.addChild(balanceContainer),balanceStage.update()}function updateBalance(){balanceText.coinsSum.text!==balanceData.coinsSum&&(balanceText.coinsSum.text=balanceData.coinsSum),balanceText.coinsCash.text!==balanceData.coinsCash&&(balanceText.coinsCash.text=balanceData.coinsCash),balanceText.betSum.text!==balanceData.betSum&&(balanceText.betSum.text=balanceData.betSum),balanceText.betCash.text!==balanceData.betCash&&(balanceText.betCash.text=balanceData.betCash),balanceText.winCash.text!==balanceData.winCash&&(balanceText.winCash.text=balanceData.winCash),balanceStage.update()}function changeBet(moreOrLess,maxBet){if(maxBet)balanceData.betValue=balanceData.betSteps[balanceData.betSteps.length-1];else if(moreOrLess===!0&&balanceData.betValue!==balanceData.betSteps[balanceData.betSteps.length-1])for(var i=balanceData.betSteps.length;i>=0;)balanceData.betSteps[i]===balanceData.betValue&&(balanceData.betValue=balanceData.betSteps[i+1],i=-1),i--;else if(moreOrLess===!1&&balanceData.betValue!==balanceData.betSteps[0])for(var _i=balanceData.betSteps.length;_i>=0;)balanceData.betSteps[_i]===balanceData.betValue&&(balanceData.betValue=balanceData.betSteps[_i-1],_i=-1),_i--;balanceData.betSum=+(balanceData.betValue*balanceData.linesLength).toFixed(0),balanceData.betCash=+(balanceData.betSum*balanceData.coinsValue).toFixed(2),updateBalance(),balanceData.betValue===balanceData.betSteps[balanceData.betSteps.length-1]||balanceData.betValue===balanceData.betSteps[0]}function changeCoins(moreOrLess,maxBet){if(maxBet)balanceData.coinsValue=balanceData.coinsSteps[balanceData.coinsSteps.length-1];else if(moreOrLess===!0&&balanceData.coinsValue!==balanceData.coinsSteps[balanceData.coinsSteps.length-1])for(var i=balanceData.coinsSteps.length;i>=0;)balanceData.coinsSteps[i]===balanceData.coinsValue&&(balanceData.coinsValue=balanceData.coinsSteps[i+1],i=-1),i--;else if(moreOrLess===!1&&balanceData.coinsValue!==balanceData.coinsSteps[0])for(var _i2=balanceData.coinsSteps.length;_i2>=0;)balanceData.coinsSteps[_i2]===balanceData.coinsValue&&(balanceData.coinsValue=balanceData.coinsSteps[_i2-1],_i2=-1),_i2--;balanceData.coinsSum=+Math.floor(balanceData.coinsCash/balanceData.coinsValue).toFixed(0),balanceData.betCash=+(balanceData.coinsValue*balanceData.betSum).toFixed(2),updateBalance(),balanceData.coinsValue===balanceData.coinsSteps[balanceData.coinsSteps.length-1]||balanceData.coinsValue===balanceData.coinsSteps[0]}function spinStart(data){"fsBonus"!==data.Mode&&balanceData.coinsSum>=balanceData.betSum&&(balanceData.coinsSum=(balanceData.coinsSum-balanceData.betSum).toFixed(0),balanceData.coinsCash=((100*balanceData.coinsCash-100*balanceData.betCash)/100).toFixed(2),balanceData.winCash=0..toFixed(2),updateBalance())}function spinEnd(spinEndObject){"undefined"!=typeof spinEndObject.winCash&&("fsBonus"===spinEndObject.mode&&(balanceData.totalWin=(100*+balanceData.totalWin+100*+(+spinEndObject.winCash).toFixed(2)/100).toFixed(2)),balanceData.winCash=(+spinEndObject.winCash).toFixed(2),balanceData.coinsCash=(+spinEndObject.scoreCents/100).toFixed(2),balanceData.coinsSum=(+spinEndObject.scoreCoins).toFixed(0),updateBalance())}function getBalanceData(){return utils.getData(balanceData)}var balanceStage=void 0,balanceContainer=(new createjs.Container).set({name:"balanceContainer"}),balanceText={},balanceData={},parameters={font:"bold 20px Titania",color:"#ddd",coinsValue:{x:50,y:50,textAlign:"center",name:"coinsValue"},coinsSum:{x:285,y:613,textAlign:"center",font:"bold 28px Titania",name:"coinsSum",shadow:new createjs.Shadow("#858482",0,0,15)},coinsCash:{x:430,y:690,textAlign:"center",name:"coinsCash"},betValue:{x:50,y:50,textAlign:"center",name:"betValue"},betSum:{x:935,y:613,textAlign:"center",font:"bold 28px Titania",name:"betSum",shadow:new createjs.Shadow("#858482",0,0,15)},betCash:{x:590,y:690,textAlign:"center",name:"betCash"},winCash:{x:760,y:690,textAlign:"center",name:"winCash"},currency:{x:50,y:50,textAlign:"center",name:"currency"}};return events.on("dataDownloaded",initBalance),events.on("changeBet",changeBet),events.on("changeCoins",changeCoins),events.on("spinStart",spinStart),events.on("spinEnd",spinEnd),{getBalanceData:getBalanceData,changeBet:changeBet,changeCoins:changeCoins}}(),bonuses=function(){function initBonusLevel(){var stage=(preloader.getLoadResult(),canvas.getStages().bonusStage);stage.alpha=1,stage.nextStage=null;var darkness=new createjs.Shape;darkness.graphics.beginFill("#000").drawRect(0,0,1280,720),darkness.alpha=0,stage.addChild(darkness),createjs.Tween.get(darkness).to({alpha:1},500).call(function(){currentLevel=1,getBonusLevel()}).wait(200).to({alpha:0},500).call(function(){stage.removeChild(darkness)})}function drawBonusLevel(){var stage=canvas.getStages().bonusStage,loader=preloader.getLoadResult(),bonusContainer=(new createjs.Container).set({name:"bonusContainer"}),bonusBG=new createjs.Bitmap(loader.getResult("bonusBG")).set({name:"bonusBG"}),bonusFG=new createjs.Bitmap(loader.getResult("bonusFG")).set({name:"bonusFG"}),illuminatorContainer=(new createjs.Container).set({name:"illuminatorContainer"}),ss=loader.getResult("illuminators"),illuminator_1=new createjs.Sprite(ss,0).set({x:358,y:255,regX:47,regY:47}),illuminator_2=new createjs.Sprite(ss,1).set({x:506,y:288,regX:47,regY:47}),illuminator_3=new createjs.Sprite(ss,2).set({x:652,y:321,regX:47,regY:47}),illuminator_4=new createjs.Sprite(ss,3).set({x:801,y:354,regX:47,regY:47}),illuminator_5=new createjs.Sprite(ss,4).set({x:947,y:386,regX:47,regY:47});doors.push(illuminator_1,illuminator_2,illuminator_3,illuminator_4,illuminator_5),doors.forEach(function(door){door.stop(),illuminatorContainer.addChild(door)}),bonusContainer.addChild(bonusBG,illuminatorContainer,bonusFG),stage.addChildAt(bonusContainer,0),addClickHandlers(doors,bonusContainer,bonusFG)}function getCurrentData(){return bonusData}function addClickHandlers(arr,container,el){var loader=preloader.getLoadResult(),bonusWinResult=void 0;doors.forEach(function(door){door.on("click",function(){if(1>clickCounter){var tl;!function(){clickCounter++;var currentData=getCurrentData();if("Exit"===currentData.CurrentValue){container.removeChild(bonusWinResult);var octopus=new createjs.Bitmap(loader.getResult("octopus")).set({name:"octopus",x:870,y:500,regX:145,regY:100,alpha:0});container.addChild(octopus),createjs.Tween.get(octopus).to({alpha:1},300);for(var tentacles=[],bonusFail=new createjs.Sprite(loader.getResult("bonusFail"),"show").set({name:"bonusFail",x:door.x,y:door.y,regX:75,regY:39}),i=0;5>i;i++){var newBonusFail=bonusFail.clone(!0);0===i&&newBonusFail.set({x:doors[i].x-5,y:doors[i].y-5}),1===i&&newBonusFail.set({x:doors[i].x-5,y:doors[i].y-5,rotation:60}),2===i&&newBonusFail.set({x:doors[i].x-5,y:doors[i].y-5,rotation:220,skewY:180}),3===i&&newBonusFail.set({x:doors[i].x-5,y:doors[i].y-5,rotation:140,skewY:180}),4===i&&newBonusFail.set({x:doors[i].x-5,y:doors[i].y-5,rotation:50,skewY:180}),tentacles.push(newBonusFail)}for(var _i=0;5>_i;_i++)container.removeChild(container.getChildByName("bonusWinResult")),createjs.Tween.get(doors[_i]).to({alpha:0},300),container.addChild(tentacles[_i]);setTimeout(function(){finishBonusLevel(container)},1500)}else!function(){var bonusWin=new createjs.Sprite(loader.getResult("bonusWin")).set({name:"bonuswin",x:door.x,y:door.y,regX:186,regY:76,alpha:1});bonusWinResult=new createjs.Sprite(loader.getResult("bonusWinResult")).set({name:"bonusWinResult",x:door.x,y:door.y,regX:100,regY:100});var light=new createjs.Bitmap(loader.getResult("light")).set({name:"light",x:door.x,y:door.y,regX:80,regY:83,alpha:0});container.addChildAt(bonusWin,container.getChildIndex(el)),container.addChild(light),tl=new TimelineLite,tl.add("scene1",0),tl.to(door,0,{alpha:0},"scene1"),tl.to(light,0,{alpha:.9},"scene1"),bonusWin.play();var bonusWinCounter=0;bonusWin.on("animationend",function(){if(bonusWinCounter++,bonusWinCounter>3){var showBonusWinResult=function(){container.removeChild(bonusWin),container.removeChild(light),bonusWinResult.gotoAndStop(currentData.CurrentValue+"table"),container.addChild(bonusWinResult),clickCounter=0,readyAfterBonus(),setTimeout(function(){getBonusLevel()},500)};tl.add("scene2",0),tl.to(light,0,{alpha:0},"scene2"),tl.to(bonusWin,0,{alpha:0,onComplete:showBonusWinResult},"scene2")}var counter=0;doors.forEach(function(door){0===door.alpha&&counter++,5===counter&&setTimeout(function(){finishBonusLevel(container)},2500)})})}()}()}})})}function readyAfterBonus(){var sessionID=login.getSessionID();utils.request("_Ready/",""+sessionID).then(function(data){})}function getBonusLevel(){var sessionID=login.getSessionID();utils.request("_Roll/",sessionID+"/1/1").then(function(data){bonusData=data,0===bonusData.OldValues.length&&drawBonusLevel()})}function finishBonusLevel(container){var loader=preloader.getLoadResult(),currentData=getCurrentData(),stage=canvas.getStages().bonusStage,finishText=new createjs.Bitmap(loader.getResult("totalWinText")).set({name:"finishText",x:232.5,y:70}),finishButton=new createjs.Sprite(loader.getResult("continueButton"),"out").set({name:"finishButton",x:442,y:560}),finishWinText=new createjs.BitmapText(currentData.CurrentWinCoins+"",loader.getResult("totalWinFS")).set({name:"finishWinText"});finishWinText.x=(1280-finishWinText.getBounds().width)/2,finishWinText.y=(720-finishWinText.getBounds().height)/2;var darkness=new createjs.Shape;darkness.graphics.beginFill("#000").drawRect(0,0,1280,720),darkness.alpha=0,stage.addChild(darkness),container.addChild(finishText,finishWinText,finishButton),finishButton.on("mousedown",function(){finishButton.gotoAndStop("over")}),finishButton.on("click",function(){createjs.Tween.get(darkness).to({alpha:1},500).wait(200).call(function(){stage.removeAllChildren(),stage.nextStage=canvas.getStages().gameStage})})}var doors=[],bonusData=void 0,clickCounter=0;events.on("initBonusLevel",initBonusLevel)}(),buttons=function(){function handleSpin(){var spinClicked=0;spinSprite.on("mousedown",function(event){if(spinClicked++,1===spinClicked&&(event.remove(),"down"!==spinSprite.currentAnimation&&"auto"!==spinSprite.currentAnimation)){spinSprite.gotoAndStop("down");var spinState=spin.getSpinState();spinState.locked||(createjs.Tween.get(spinSprite).to({scaleX:.95,scaleY:.95},75).to({scaleX:1,scaleY:1},75),spinState.inProgress&&spinState.fastSpinFlag&&!spinState.locked?spin.fastSpin():spinState.inProgress||spinState.locked||spin.spinStart())}},null,!0)}function drawButtons(loader){buttonsContainer=new createjs.Container,spinSprite=new createjs.Sprite(loader.getResult("spinButton")).set({x:1180,y:360,regX:87,regY:87,name:"spinSprite"}),spinSprite.gotoAndStop("out"),handleSpin(),autoSprite=new createjs.Sprite(loader.getResult("autoButton")).set({x:1178,y:210,regX:50,regY:50,name:"autoSprite"}),autoSprite.gotoAndStop("out"),autoSprite.on("click",function(){"out"===autoSprite.currentAnimation?menu.showMenu("auto"):"auto"===autoSprite.currentAnimation&&(stopAutoButtons(),autoplay.stopAutoplay())}),betSprite=new createjs.Sprite(loader.getResult("betButton")).set({x:1178,y:510,regX:50,regY:50,name:"betSprite"}),betSprite.gotoAndStop("out"),betSprite.on("click",function(){"out"===betSprite.currentAnimation&&menu.showMenu("bet")}),menuSprite=new createjs.Sprite(loader.getResult("menuButton")).set({x:1140,y:70,name:"menuSprite"}),menuSprite.gotoAndStop("out"),menuSprite.on("click",function(){"out"===menuSprite.currentAnimation&&menu.showMenu("settings")}),soundSprite=new createjs.Sprite(loader.getResult("soundButton")).set({x:1140,y:570,name:"soundSprite"}),soundMuted&&soundSprite.gotoAndStop("down"),soundSprite.on("click",function(){soundMuted=!soundMuted,soundMuted?soundSprite.gotoAndStop("down"):soundSprite.gotoAndStop("out")}),buttonsContainer.addChild(spinSprite,autoSprite,betSprite,menuSprite,soundSprite);var stage=canvas.getStages().gameStage;stage.enableMouseOver(10),stage.addChild(buttonsContainer)}function checkButtonsState(){if(buttonsContainer){var spinState=spin.getSpinState();autoMode?(autoSprite.gotoAndStop("auto"),spinSprite.gotoAndStop("auto"),menuSprite.gotoAndStop("down"),betSprite.gotoAndStop("down")):fsMode?(autoSprite.gotoAndStop("fs"),betSprite.gotoAndStop("fs"),spinSprite.gotoAndStop("auto"),menuSprite.gotoAndStop("down")):spinState.locked?spinSprite.gotoAndStop("down"):spinState.inProgress&&spinState.fastSpinFlag?(handleSpin(),spinSprite.gotoAndStop("over")):spinState.inProgress?(menuSprite.gotoAndStop("down"),autoSprite.gotoAndStop("down"),spinSprite.gotoAndStop("down"),betSprite.gotoAndStop("down"),soundSprite.gotoAndStop("down")):(handleSpin(),autoSprite.gotoAndStop("out"),menuSprite.gotoAndStop("out"),spinSprite.gotoAndStop("out"),betSprite.gotoAndStop("out"),soundMuted?soundSprite.gotoAndStop("down"):soundSprite.gotoAndStop("out"))}}function startAutoButtons(count){autoMode=!0,autoText=new createjs.Text(count,"bold 75px Titania","#ddd").set({x:1180,y:360,name:"autoText",textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#ddd",0,0,8)}),buttonsContainer.addChild(autoText),setTimeout(function(){events.trigger("startAutoplay")},500)}function stopAutoButtons(){autoSprite.gotoAndStop("down"),autoMode=!1,buttonsContainer.removeChild(autoText)}function changeAutoText(newText){autoText.text=newText}function startFSButtons(data){fsMode=!0;var count=data.fsCount,level=data.fsLevel,multi=data.fsMulti,fsLevel=new createjs.Text(level,"50px bold Titania","#ddd").set({name:"fsLevel",x:autoSprite.x,y:autoSprite.y+5,textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#ddd",0,0,8)}),fsMulti=new createjs.Text(multi,"50px bold Titania","#ddd").set({name:"fsMulti",x:betSprite.x,y:betSprite.y+5,textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#ddd",0,0,8)}),fsCount=new createjs.Text(count,"85px bold Titania","#ddd").set({name:"fsCount",x:spinSprite.x,y:spinSprite.y,textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#ddd",0,0,8)});buttonsContainer.addChild(fsLevel,fsMulti,fsCount)}function updateFSButtons(newData){if(buttonsContainer.getChildByName("fsCount")){if("undefined"!=typeof newData.fsCount){var newCount=newData.fsCount,fsCountText=buttonsContainer.getChildByName("fsCount").text;+fsCountText!==newCount&&(buttonsContainer.getChildByName("fsCount").text=newCount)}else buttonsContainer.getChildByName("fsCount").text=+buttonsContainer.getChildByName("fsCount").text-1;if("undefined"!=typeof newData.fsLevel){var newLevel=newData.fsLevel,fsLevelText=buttonsContainer.getChildByName("fsLevel").text;+fsLevelText!==newLevel&&(buttonsContainer.getChildByName("fsLevel").text=newLevel)}if("undefined"!=typeof newData.fsMulti){var newMulti=newData.fsMulti,fsMultiText=buttonsContainer.getChildByName("fsMulti").text;+fsMultiText!==newMulti&&(buttonsContainer.getChildByName("fsMulti").text=newMulti)}}}function stopFSButtons(){fsMode=!1;var fsLevel=buttonsContainer.getChildByName("fsLevel"),fsMulti=buttonsContainer.getChildByName("fsMulti"),fsCount=buttonsContainer.getChildByName("fsCount");buttonsContainer.removeChild(fsLevel,fsMulti,fsCount)}var buttonsContainer=void 0,menuSprite=void 0,autoSprite=void 0,spinSprite=void 0,betSprite=void 0,soundSprite=void 0,soundMuted=!0,autoMode=void 0,autoText=void 0,fsMode=void 0;return events.on("preloadComplete",drawButtons),events.on("initAutoplay",startAutoButtons),events.on("stopAutoplay",stopAutoButtons),events.on("drawFreeSpins",startFSButtons),events.on("stopFreeSpins",stopFSButtons),events.on("spinEnd",updateFSButtons),events.on("spinStart",updateFSButtons),createjs.Ticker.on("tick",checkButtonsState),{changeAutoText:changeAutoText,stopAutoButtons:stopAutoButtons}}(),canvas=function(){function initStages(){var bgStaticStage=new createjs.Stage("bgStaticCanvas").set({name:"bgStaticStage"}),gameStaticStage=new createjs.Stage("gameStaticCanvas").set({name:"gameStaticStage"}),bonusStaticStage=new createjs.Stage("bonusStaticCanvas").set({name:"bonusStaticStage"}),bgStage=new createjs.Stage("bgCanvas").set({name:"bgStage"}),gameStage=new createjs.Stage("gameCanvas").set({name:"gameStage"}),bonusStage=new createjs.Stage("bonusCanvas").set({name:"bonusStage"});gameStage.snapToPixelEnabled=!0,bonusStage.nextStage=gameStage,bonusStage.enableMouseOver(10),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.on("tick",bgStage),createjs.Ticker.on("tick",gameStage),createjs.Ticker.on("tick",bonusStage),stages={bgStage:bgStage,bgStaticStage:bgStaticStage,gameStage:gameStage,gameStaticStage:gameStaticStage,bonusStage:bonusStage,bonusStaticStage:bonusStaticStage},events.trigger("stagesCreated",stages)}function launchFullScreen(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function getStages(){if("undefined"!=typeof stages)return stages;throw new Error("Stages are not created.")}var stages=void 0;return events.on("initStages",initStages),{initStages:initStages,getStages:getStages,launchFullScreen:launchFullScreen}}(),freeSpins=function(){function drawFreeSpinsBG(){var loader=preloader.getLoadResult(),stage=canvas.getStages().bgStaticStage,fsBG=new createjs.Bitmap(loader.getResult("fsBG")).set({name:"fsBG"});stage.removeChild(stage.getChildByName("mainBG")),stage.addChildAt(fsBG,0),stage.update()}function initFreeSpins(data){fsTotalWin=0,drawFreeSpinsBG(),fsWheels=login.getInitData().freeWheels;var wheelsLength=fsWheels.length,i=void 0,randomArray=[];for(i=0;5>i;i++){var randomNumber=Math.round(Math.random()*(wheelsLength-1));randomArray.push(randomNumber)}spin._getScreenData(randomArray,fsWheels)}function transitionFreeSpins(data){fsStartData=data;var loader=preloader.getLoadResult();stage=canvas.getStages().bonusStage,stage.alpha=1;var transitionContainer=(new createjs.Container).set({name:"transitionContainer",alpha:0}),transitionBG=new createjs.Bitmap(loader.getResult("transitionBG")).set({
name:"transitionBG"}),transitionText=new createjs.Bitmap(loader.getResult("freeSpinsText")).set({name:"transitionText",x:245,y:70}),transitionOsminog=new createjs.Bitmap(loader.getResult("osminog")).set({name:"transitionOsmonig",x:788,y:120}),transitionVodolaz=new createjs.Bitmap(loader.getResult("vodolaz")).set({name:"transitionvodolaz",x:0,y:80}),transitionButton=new createjs.Sprite(loader.getResult("continueButton"),"out").set({name:"transitionButton",x:442,y:560});createjs.Tween.get(transitionContainer).to({alpha:1},500).call(function(){events.trigger("drawFreeSpins",fsStartData)}),transitionButton.on("mousedown",function(){transitionButton.gotoAndStop("over")}),transitionButton.on("click",function(){setTimeout(function(){events.trigger("startFreeSpin")},1e3),createjs.Tween.get(transitionContainer).to({alpha:0},500)}),transitionContainer.addChild(transitionBG,transitionText,transitionOsminog,transitionVodolaz,transitionButton),stage.addChild(transitionContainer)}function startFreeSpin(){spin.spinStart(!1,!0)}function stopFreeSpins(){var loader=preloader.getLoadResult(),stage=canvas.getStages().bgStaticStage,mainBG=new createjs.Bitmap(loader.getResult("mainBG")).set({name:"mainBG"});stage.removeChild(stage.getChildByName("fsBG")),stage.addChildAt(mainBG,0),stage.update();var bonusStage=canvas.getStages().bonusStage;bonusStage.removeChild(bonusStage.getChildByName("fsTotalContainer"))}function getWheels(){return fsWheels}function countTotalWin(data){if("fsBonus"===data.mode)if(stage.getChildByName("fsTotalContainer"))fsTotalWin+=data.winCoins,stage.getChildByName("fsTotalContainer").getChildByName("fsTotalWinText").text=fsTotalWin;else{fsTotalWin+=data.winCoins;var fsTotalContainer=(new createjs.Container).set({name:"fsTotalContainer",x:550,y:20}),fsTotalWinTitle=new createjs.Text("Total Free Win:","24px bold Arial","#fff").set({name:"fsTotalWinTitle",textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#C19433",0,0,10)}),fsTotalWinText=new createjs.Text(fsTotalWin,"36px bold Arial","#fff").set({name:"fsTotalWinText",x:110,y:0,textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#C19433",0,0,10)});fsTotalContainer.addChild(fsTotalWinTitle,fsTotalWinText),stage.addChild(fsTotalContainer)}}function finishFreeSpins(){var loader=preloader.getLoadResult(),finishContainer=(new createjs.Container).set({name:"finishContainer",alpha:0}),finishBG=new createjs.Bitmap(loader.getResult("transitionBG")).set({name:"finishBG"}),finishText=new createjs.Bitmap(loader.getResult("totalWinText")).set({name:"finishText",x:232.5,y:70}),finishOsminog=new createjs.Bitmap(loader.getResult("osminog")).set({name:"finishOsminog",x:788,y:120}),finishVodolaz=new createjs.Bitmap(loader.getResult("vodolaz")).set({name:"finishVodolaz",x:0,y:80}),finishSunduk=new createjs.Bitmap(loader.getResult("sunduk")).set({name:"finishSunduk",x:345.5,y:220}),finishWinText=new createjs.BitmapText(fsTotalWin+"",loader.getResult("totalWinFS")).set({name:"finishWinText"});finishWinText.x=(1280-finishWinText.getBounds().width)/2,finishWinText.y=(720-finishWinText.getBounds().height)/2;var finishButton=new createjs.Sprite(loader.getResult("continueButton"),"out").set({name:"finishButton",x:442,y:560});finishContainer.addChild(finishBG,finishText,finishSunduk,finishOsminog,finishVodolaz,finishWinText,finishButton),createjs.Tween.get(finishContainer).to({alpha:1},500).call(function(){events.trigger("stopFreeSpins")}),finishButton.on("mousedown",function(){finishButton.gotoAndStop("over")}),finishButton.on("click",function(){createjs.Tween.get(finishContainer).to({alpha:0},500).call(function(){stage.removeAllChildren()})});var stage=canvas.getStages().bonusStage;stage.addChild(finishContainer)}function addMultiBonus(data){var multiStage=canvas.getStages().bonusStage,loader=preloader.getLoadResult(),multiContainer=(new createjs.Container).set({name:"multiContainer",alpha:0}),multiBG=new createjs.Bitmap(loader.getResult("multiBG")).set({name:"multiBG"}),multiTitle=new createjs.Bitmap(loader.getResult("multiTitle")).set({name:"multiTitle",x:206,y:100}),multiCoins=new createjs.Bitmap(loader.getResult("multiCoins")).set({name:"multiCoins",x:544,y:440}),multiWinText=new createjs.Text(data.coins,"150px bold Arial","#fff").set({x:640,y:340,textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#fff",0,0,10)}),multiButton=new createjs.Sprite(loader.getResult("continueButton"),"out").set({name:"multiButton",x:442,y:560});multiContainer.addChild(multiBG,multiTitle,multiCoins,multiWinText,multiButton),createjs.Tween.get(multiContainer).to({alpha:1},500),multiButton.on("mousedown",function(){multiButton.gotoAndStop("over")}),multiButton.on("click",function(){utils.request("_Ready/",login.getSessionID()).then(function(response){0===response.ErrorCode&&events.trigger("startFreeSpin")}),createjs.Tween.get(multiContainer).to({alpha:0},500).call(function(){multiStage.removeChild(multiContainer)})}),multiStage.addChild(multiContainer)}var fsWheels=void 0,fsStartData=void 0,fsTotalWin=void 0,stage=void 0;return events.on("initFreeSpins",transitionFreeSpins),events.on("drawFreeSpins",initFreeSpins),events.on("stopFreeSpins",stopFreeSpins),events.on("finishFreeSpins",finishFreeSpins),events.on("startFreeSpin",startFreeSpin),events.on("spinEnd",countTotalWin),events.on("multiplierBonus",addMultiBonus),{initFreeSpins:initFreeSpins,stopFreeSpins:stopFreeSpins,startFreeSpin:startFreeSpin,getWheels:getWheels,drawFreeSpinsBG:drawFreeSpinsBG}}(),init=function(){function parseWheels(string){var wheelsMas=string.split("|").map(function(column){return column.split("@")});return wheelsMas.map(function(column,columnIndex){return column.map(function(element,rowIndex){switch(element){case"j":element=1;break;case"iJ":element=2;break;case"q":element=3;break;case"iQ":element=4;break;case"k":element=5;break;case"iK":element=6;break;case"a":element=7;break;case"iA":element=8;break;case"wild":element=9;break;case"scatter":element=10;break;case"sw1":element=11;break;case"sw2":element=12;break;case"sw3":element=13;break;case"card":element=14}column[rowIndex]=element})}),wheelsMas}function parseLines(string){var linesMas=string.split("|").map(function(line,lineNumber){return line.split("@").map(function(coords,index){return coords.split(",")})});return linesMas}function initGame(sessionID){var gameID=6,playPromise=utils.request("_Play","/"+sessionID+"/"+gameID);playPromise.then(function(balanceData){initData.balance=balanceData})["catch"](function(error){}),Promise.all([playPromise]).then(function(){var wheelsPromise=utils.request("_GetAllWheels","/"+sessionID).then(function(wheelsString){initData.wheels=parseWheels(wheelsString)})["catch"](function(error){}),freeWheelsPromise=utils.request("_GetAllWheelsByMode","/"+sessionID+"/fsBonus").then(function(freeWheelsString){initData.freeWheels=parseWheels(freeWheelsString)})["catch"](function(error){}),linesPromise=utils.request("_GetLines","/"+sessionID).then(function(linesString){initData.lines=parseLines(linesString)})["catch"](function(error){});Promise.all([wheelsPromise,freeWheelsPromise,linesPromise]).then(function(){events.trigger("dataDownloaded",initData)})})}function getInitData(){return utils.getData(initData)}var initData={};return events.on("initGame",initGame),{getInitData:getInitData}}(),lines=function(){function parseLinesResult(arr){var result=[];return arr.forEach(function(line){var amount=+parseInt(line,10),number=+parseInt(line.substr(line.indexOf("#")+1),10),win=+parseInt(line.substr(line.indexOf(":")+1),10),lineObj={amount:amount,number:number,win:win};result.push(lineObj)}),result}function parseLinesCoords(arr){var result=[];return arr.forEach(function(line,number){result[number]=[],line.forEach(function(point,index){var x=+point[0],y=+point[1],resultX=192*(x+.5),resultY=180*(y+.5),resultCoords={x:resultX,y:resultY};result[number][index]=resultCoords})}),result}function parseLinesPaths(arr){var result=[];return arr.forEach(function(line,number){result[number]=[],line.forEach(function(point){result[number].push(point.x,point.y)})}),result}function initLines(data){linesData.linesArray=data.lines,linesData.linesCoords=parseLinesCoords(linesData.linesArray),linesData.linesPaths=parseLinesPaths(linesData.linesCoords),spin.getGamePosition().then(function(result){winLinesContainer=(new createjs.Container).set({name:"winLinesContainer",x:result.x,y:result.y}),winRectsContainer=(new createjs.Container).set({name:"winRectsContainer",x:result.x,y:result.y}),winNumbersContainer=(new createjs.Container).set({name:"winNumbersContainer"}),backStage=canvas.getStages().bgStage,frontStage=canvas.getStages().gameStage,backStage.addChildAt(winLinesContainer,0),frontStage.addChildAt(winNumbersContainer,winRectsContainer,0),drawLinesNumbers()})}function drawLinesNumbers(){for(var loader=preloader.getLoadResult(),linesDiscSpriteSheet=loader.getResult("linesDisc"),i=0,len=linesData.linesCoords.length;len+1>i;i++){var linesNumber=new createjs.Text(i+1,parameters.font,parameters.color).set({x:parameters[i+1].x,y:parameters[i+1].y,name:"linesNumber_"+(i+1),textAlign:"center",shadow:new createjs.Shadow("#0f334c",0,0,5)});i===len&&(linesNumber.text=1);var linesDisc=new createjs.Sprite(linesDiscSpriteSheet,"on").set({x:parameters[i+1].x,y:parameters[i+1].y,name:"linesDisc_"+(i+1),regX:15,regY:5});linesEls.linesDiscs.push(linesDisc),linesEls.linesNumbers.push(linesNumber),winNumbersContainer.addChild(linesNumber,linesDisc)}}function saveWinLines(spinWinObject){winData=parseLinesResult(spinWinObject.winLines),winData.winCoins=spinWinObject.winCoins,winData.winCents=spinWinObject.winCents}function startEventTimer(name,event,time){flags[name]=setTimeout(function(){events.trigger(event)},time)}function drawTotalWin(win){if(win){var loader=preloader.getLoadResult(),totalWin=(new createjs.Container).set({name:"totalWin"}),totalWinText=new createjs.BitmapText(win+"",loader.getResult("winTotal")).set({name:"totalWinText"});return totalWinText.x=(960-totalWinText.getBounds().width)/2,totalWinText.y=(540-totalWinText.getBounds().height)/2,totalWin.addChild(totalWinText),totalWin}}function drawLineByLine(){if(1===winData.length&&-1===+winData[0].number);else{winData.forEach(function(data){winFinishData.push(data)});var settings={};settings.light=!0,settings.light?flags.linesTicker=createjs.Ticker.on("tick",function(event){winLinesContainer.getChildByName("winLight")||(event.remove(),removeWinScreen(),drawWinLine(winFinishData[0],{index:0,winText:!0,winLight:!0,winShape:!0}))}):flags.linesTimer=setTimeout(function(){removeWinScreen(),drawWinLine(winFinishData[0],{index:0,winText:!0,winLight:!1,winShape:!0})},1500)}}function removeWinElements(){for(var gameContainer=canvas.getStages().bgStage.getChildByName("gameContainer"),i=0;5>i;i++)for(var column=gameContainer.getChildByName("gameColumn"+i),j=0;5>j;j++){var element=column.getChildByName("gameElement"+j),animationName=element.currentAnimation,elementIndex=animationName.substr(animationName.indexOf("-")+1);element.gotoAndStop("normal-"+elementIndex),element.set({scaleX:1,scaleY:1})}}function removeWinScreen(){winRectsContainer.removeAllChildren(),winLinesContainer.removeAllChildren(),removeWinElements(),linesEls.linesDiscs.forEach(function(disc){disc.gotoAndStop("on")})}function drawWinLines(spinEndObject){flags.autoMode=spinEndObject.autoSpinFlag,flags.freeMode=spinEndObject.freeSpinFlag,flags.mode=spinEndObject.mode,flags.fsCount=spinEndObject.fsCount;preloader.getLoadResult();winData[0]?(winData.forEach(function(winDataObject){drawWinLine(winDataObject)}),winRectsContainer.addChild(drawTotalWin(winData.winCoins)),flags.autoMode?startEventTimer("autoTimer","startAutoplay",1500):flags.freeMode&&"fsBonus"===flags.mode&&flags.fsCount?startEventTimer("freeTimer","startFreeSpin",1500):flags.freeMode&&"fsBonus"===flags.mode&&0===flags.fsCount?events.trigger("finishFreeSpins"):drawLineByLine()):flags.autoMode?startEventTimer("autoTimer","startAutoplay",200):flags.freeMode&&"fsBonus"===flags.mode&&flags.fsCount?startEventTimer("freeTimer","startFreeSpin",200):flags.freeMode&&"fsBonus"===flags.mode&&0===flags.fsCount&&events.trigger("finishFreeSpins")}function drawLinesLight(linePath){for(var amount=Math.round(50*Math.random())+10,loader=preloader.getLoadResult(),lightSpriteSheet=loader.getResult("linesSprite"),i=0;amount>i;i++){var timeout=700*Math.random(),light=new createjs.Sprite(lightSpriteSheet,"go").set({x:linePath[0],y:linePath[1],regX:24,regY:19,name:"winLight"});createjs.Tween.get(light).wait(timeout).to({guide:{path:linePath,orient:"cw"}},700).call(function(tween){winLinesContainer.removeChild(tween.target)}),winLinesContainer.addChild(light)}}function drawLinesText(data){var number=data.number,amount=data.amount,win=data.win,loader=preloader.getLoadResult(),winText=(new createjs.Container).set({y:linesData.linesCoords[number-1][amount-1].y+30,x:linesData.linesCoords[number-1][amount-1].x+32,name:"winText"}),winLineRect=new createjs.Bitmap(loader.getResult("winLineRect")).set({name:"winLineRect",scaleX:1,scaleY:1}),winLineText=new createjs.Text(win,"bold 27px Arial","gold").set({x:26,y:26,textAlign:"center",textBaseline:"middle",name:"winLineText",shadow:new createjs.Shadow("#C19433",0,0,15)});(winLineText.text+"").length>3?winLineText.font="bold 20px Arial":(winLineText.text+"").length>2?winLineText.font="bold 25px Arial":(winLineText.text+"").length>1&&(winLineText.font="bold 30px Arial"),winText.addChild(winLineRect,winLineText),linesEls.winRects.push(winText),winRectsContainer.addChild(winText)}function drawLinesShape(number){var winDisc=linesEls.linesDiscs[number-1];winDisc.gotoAndStop("off");for(var winLine=new createjs.Shape,j=0;5>j;j++){var currentCoords=linesData.linesCoords[number-1][j];0===j?winLine.graphics.s("rgba(193, 148, 51, 0.8)").setStrokeStyle(2).lt(currentCoords.x,currentCoords.y):winLine.graphics.lt(currentCoords.x,currentCoords.y)}winLine.graphics.es(),linesEls.winLines.push(winLine),winLinesContainer.addChild(winLine)}function drawWinLine(data,options){var defaultOptions={winText:!1,winLight:!0,winShape:!0};"undefined"==typeof options&&(options=defaultOptions);var gameContainer=(preloader.getLoadResult(),canvas.getStages().bgStage.getChildByName("gameContainer"));data&&!function(){var number=data.number,amount=data.amount,win=data.win;if(-1!==number&&-2!==number){var line=linesData.linesArray[number-1];options.winText&&drawLinesText(data),options.winLight&&drawLinesLight(linesData.linesPaths[number-1]),options.winShape&&drawLinesShape(number),line.forEach(function(coords,index){var x=+coords[0],y=+coords[1];if(amount>x){var column=gameContainer.getChildByName("gameColumn"+index),element=column.getChildByName("gameElement"+(y+1)),animationName=element.currentAnimation,elementIndex=animationName.substr(animationName.indexOf("-")+1);element.gotoAndStop("win-"+elementIndex),createjs.Tween.get(element).to({scaleX:.8,scaleY:.8},200).to({scaleX:1.05,scaleY:1.05},700,createjs.Ease.bounceOut)}})}else if(-1===number)if(win>0)for(var i=0;5>i;i++)for(var column=gameContainer.getChildByName("gameColumn"+i),j=0;5>j;j++){var element=column.getChildByName("gameElement"+j),animationName=element.currentAnimation,elementIndex=animationName.substr(animationName.indexOf("-")+1);10===+elementIndex&&(element.gotoAndStop("win-"+elementIndex),createjs.Tween.get(element).to({scaleX:.8,scaleY:.8},200).to({scaleX:1.1,scaleY:1.1},700,createjs.Ease.bounceOut))}else for(var _i=0;5>_i;_i++)for(var _column=gameContainer.getChildByName("gameColumn"+_i),_j=0;5>_j;_j++){var _element=_column.getChildByName("gameElement"+_j),_animationName=_element.currentAnimation,_elementIndex=_animationName.substr(_animationName.indexOf("-")+1);11!==+_elementIndex&&12!==+_elementIndex&&13!==+_elementIndex&&14!==+_elementIndex||_element.gotoAndStop("win-"+_elementIndex),14===+_elementIndex&&(_element.gotoAndStop("win-"+_elementIndex),createjs.Tween.get(_element).to({scaleX:.8,scaleY:.8},200).to({scaleX:1.1,scaleY:1.1},700,createjs.Ease.bounceOut),winRectsContainer.addChild(drawTotalWin("+3").set({x:120,y:260,scaleX:.7,scaleY:.7})))}"undefined"!=typeof options&&"undefined"!=typeof options.index&&(flags.scatterTimer=null,flags.lineTimer=createjs.Ticker.on("tick",function(event){-1!==number?winLinesContainer.getChildByName("winLight")||(event.remove(),removeWinScreen(),winFinishData[options.index+1]?drawWinLine(winFinishData[options.index+1],{index:options.index+1,winText:!0,winLight:!0,winShape:!0}):drawWinLine(winFinishData[0],{index:0,winText:!0,winLight:!0,winShape:!0})):flags.scatterTimer||(event.remove(),flags.scatterTimer=setTimeout(function(){removeWinScreen(),winFinishData[options.index+1]?drawWinLine(winFinishData[options.index+1],{index:options.index+1,winText:!0,winLight:!0,winShape:!0}):drawWinLine(winFinishData[0],{index:0,winText:!0,winLight:!0,winShape:!0})},1e3))}))}()}function removeWinLines(){createjs.Ticker.off("tick",flags.lineTimer),createjs.Ticker.off("tick",flags.linesTimer),winData[0]&&(winData=[],winFinishData=[],linesEls.linesDiscs.forEach(function(disc){disc.gotoAndStop("on")}),winLinesContainer.removeAllChildren(),winRectsContainer.removeAllChildren(),linesEls.winLines=[],linesEls.winRects=[])}function clearAutoTimer(){flags.autoMode=!1,clearTimeout(flags.autoTimer)}createjs.MotionGuidePlugin.install(createjs.Tween);var frontStage=void 0,backStage=void 0,winNumbersContainer=void 0,winLinesContainer=void 0,winRectsContainer=void 0,linesEls={linesDiscs:[],linesNumbers:[],winLines:[],winRects:[]},linesData={},winData=[],winFinishData=[],parameters={font:"bold 18px Arial",color:"#ddd",1:{x:87,y:294,textBaseline:"middle"},2:{x:1072,y:148,textBaseline:"middle"},3:{x:1072,y:473,textBaseline:"middle"},4:{x:87,y:80,textBaseline:"middle"},5:{x:87,y:508,textBaseline:"middle"},6:{x:87,y:114,textBaseline:"middle"},7:{x:87,y:473,textBaseline:"middle"},8:{x:1072,y:363,textBaseline:"middle"},9:{x:87,y:260,textBaseline:"middle"},10:{x:87,y:440,textBaseline:"middle"},11:{x:87,y:181,textBaseline:"middle"},12:{x:1072,y:541,textBaseline:"middle"},13:{x:1072,y:80,textBaseline:"middle"},14:{x:1072,y:508,textBaseline:"middle"},15:{x:1072,y:114,textBaseline:"middle"},16:{x:1072,y:440,textBaseline:"middle"},17:{x:1072,y:181,textBaseline:"middle"},18:{x:87,y:148,textBaseline:"middle"},19:{x:87,y:541,textBaseline:"middle"},20:{x:87,y:328,textBaseline:"middle"},21:{x:1072,y:329,textBaseline:"middle"},22:{x:1072,y:295,textBaseline:"middle"}},flags={};return events.on("dataDownloaded",initLines),events.on("spinStart",removeWinLines),events.on("spinEnd",drawWinLines),events.on("spinWin",saveWinLines),{drawLinesNumbers:drawLinesNumbers,drawWinLine:drawWinLine,clearAutoTimer:clearAutoTimer,removeWinLines:removeWinLines,removeWinScreen:removeWinScreen}}(),login=function(){function enter(userID,casinoID){userID=userID||1,casinoID=casinoID||1,utils.request("_Login","/"+userID+"/"+casinoID).then(function(ID){sessionID=ID,events.trigger("initGame",sessionID),events.trigger("initStages",sessionID),events.trigger("initPreloader",sessionID)})["catch"](function(error){})}function getSessionID(){return utils.getData(sessionID)}var sessionID=void 0;return{enter:enter,getSessionID:getSessionID}}();login.enter();var menu=function(){function showMenu(name){var loader=preloader.getLoadResult(),bonusStage=canvas.getStages().bonusStage;canvas.getStages().bonusStaticStage;bonusStage.alpha=1;var menuContainer=(new createjs.Container).set({x:1280,y:0,name:"menuContainer"});menuContainer.on("click",function(event){event.stopPropagation()});var overlay=new createjs.Shape;overlay.set({name:"overlay",alpha:0}),overlay.graphics.beginFill("rgba(0, 0, 0, 0.5)").drawRect(0,0,1280,720),createjs.Tween.get(overlay).to({alpha:1},300),overlay.on("click",function(event){createjs.Tween.get(menuContainer).to({x:1280},300),createjs.Tween.get(overlay).to({alpha:0},300).call(hideMenu)}),bonusStage.addChildAt(overlay,0),bonusStage.addChild(menuContainer);var menuBG=new createjs.Bitmap(loader.getResult("menuBG")).set({name:"menuBG"}),menuBack=new createjs.Sprite(loader.getResult("menuBack")).set({name:"menuBack",x:100,y:584});if(menuBack.on("click",function(){menuBack.gotoAndStop("down"),createjs.Tween.get(menuContainer).to({x:1280},300),createjs.Tween.get(overlay).to({alpha:0},300).call(hideMenu)}),menuContainer.addChild(menuBG,menuBack),"bet"===name)!function(){var menuBetTitle=new createjs.Bitmap(loader.getResult("menuBetTitle")).set({name:"menuBetTitle",x:60,y:35}),menuMaxBet=new createjs.Sprite(loader.getResult("menuMaxBet"),"out").set({name:"menuMaxBet",x:85,y:100}),menuBetMinus=new createjs.Sprite(loader.getResult("menuMinusPlus"),"minus_out").set({name:"menuBetMinus",x:40,y:326}),menuBetPlus=new createjs.Sprite(loader.getResult("menuMinusPlus"),"plus_out").set({name:"menuBetPlus",x:208,y:326}),betValue=balance.getBalanceData().betValue,coinsValue=balance.getBalanceData().coinsValue,menuBetText=new createjs.Text(betValue,"bold 60px Titania","#ddd").set({name:"menuBetText",textAlign:"center",textBaseline:"middle",x:152,y:346,shadow:new createjs.Shadow("#ddd",0,0,8)}),menuCoinsText=new createjs.Text(coinsValue,"bold 35px Titania","#ddd").set({name:"menuCoinsText",textAlign:"center",textBaseline:"middle",x:152,y:514,shadow:new createjs.Shadow("#ddd",0,0,8)}),menuCoinMinus=new createjs.Sprite(loader.getResult("menuMinusPlus"),"minus_out").set({name:"menuCoinMinus",x:40,y:485}),menuCoinPlus=new createjs.Sprite(loader.getResult("menuMinusPlus"),"plus_out").set({name:"menuCoinPlus",x:208,y:485});menuMaxBet.on("click",function(){balance.changeBet(!0,!0),balance.changeCoins(!0,!0),menuBetText.text=balance.getBalanceData().betValue,menuCoinsText.text=balance.getBalanceData().coinsValue}),menuCoinPlus.on("click",function(){balance.changeCoins(!0),menuCoinsText.text=balance.getBalanceData().coinsValue}),menuCoinMinus.on("click",function(){balance.changeCoins(!1),menuCoinsText.text=balance.getBalanceData().coinsValue}),menuBetPlus.on("click",function(){balance.changeBet(!0),menuBetText.text=balance.getBalanceData().betValue}),menuBetMinus.on("click",function(){balance.changeBet(!1),menuBetText.text=balance.getBalanceData().betValue});var menuBetLevel=new createjs.Bitmap(loader.getResult("menuBetLevel")).set({name:"menuBetLevel",x:92,y:264}),menuBetBG=new createjs.Bitmap(loader.getResult("menuDisc")).set({name:"menuBetBG",x:100,y:295}),menuCoinValue=new createjs.Bitmap(loader.getResult("menuCoinValue")).set({name:"menuCoinValue",x:83,y:432}),menuCoinBG=menuBetBG.clone().set({name:"menuCoinBG",y:460}),menuDivider1=new createjs.Bitmap(loader.getResult("menuDivider")).set({name:"menuDivider1",x:129,y:90}),menuDivider2=menuDivider1.clone().set({name:"menuDivider2",y:245}),menuDivider3=menuDivider1.clone().set({name:"menuDivider3",y:414}),menuDivider4=menuDivider1.clone().set({name:"menuDivider4",y:575});menuContainer.addChild(menuBetTitle,menuMaxBet,menuBetLevel,menuBetBG,menuBetPlus,menuBetMinus,menuBetText,menuCoinValue,menuCoinBG,menuCoinPlus,menuCoinMinus,menuCoinsText,menuDivider1,menuDivider2,menuDivider3,menuDivider4)}();else if("auto"===name){var menuAutoTitle=new createjs.Bitmap(loader.getResult("menuAutoTitle")).set({name:"menuAutoTitle",x:33.5,y:35}),menuAutoCircle=new createjs.Bitmap(loader.getResult("menuDisc")).set({regX:52,regY:52}),menuAutoText=new createjs.Text("","bold 50px Titania","#ddd").set({textAlign:"center",textBaseline:"middle",shadow:new createjs.Shadow("#ddd",0,0,8)}),menuAutoCircle10=menuAutoCircle.clone().set({name:"menuAutoCircle10"}),menuAutoText10=menuAutoText.clone().set({text:10,name:"menuAutoText10"}),menuAutoButton10=(new createjs.Container).set({amount:10,name:"menuAutoButton10",x:82,y:190});menuAutoButton10.addChild(menuAutoCircle10,menuAutoText10);var menuAutoCircle25=menuAutoCircle.clone().set({name:"menuAutoCircle25"}),menuAutoText25=menuAutoText.clone().set({text:25,name:"menuAutoText25"}),menuAutoButton25=(new createjs.Container).set({amount:25,name:"menuAutoButton25",x:217,y:190});menuAutoButton25.addChild(menuAutoCircle25,menuAutoText25);var menuAutoCircle50=menuAutoCircle.clone().set({name:"menuAutoCircle50"}),menuAutoText50=menuAutoText.clone().set({text:50,name:"menuAutoText50"}),menuAutoButton50=(new createjs.Container).set({amount:50,name:"menuAutoButton50",x:82,y:335});menuAutoButton50.addChild(menuAutoCircle50,menuAutoText50);var menuAutoCircle100=menuAutoCircle.clone().set({name:"menuAutoCircle100"}),menuAutoText100=menuAutoText.clone().set({text:100,font:"bold 36px Titania",name:"menuAutoText100"}),menuAutoButton100=(new createjs.Container).set({amount:100,name:"menuAutoButton100",x:217,y:335});menuAutoButton100.addChild(menuAutoCircle100,menuAutoText100);var menuAutoCircle250=menuAutoCircle.clone().set({name:"menuAutoCircle250"}),menuAutoText250=menuAutoText.clone().set({text:250,font:"bold 36px Titania",name:"menuAutoText250"}),menuAutoButton250=(new createjs.Container).set({amount:250,name:"menuAutoButton250",x:82,y:480});menuAutoButton250.addChild(menuAutoCircle250,menuAutoText250);var menuAutoCircle500=menuAutoCircle.clone().set({name:"menuAutoCircle500"}),menuAutoText500=menuAutoText.clone().set({text:500,font:"bold 36px Titania",name:"menuAutoText500"}),menuAutoButton500=(new createjs.Container).set({amount:500,name:"menuAutoButton500",x:217,y:480});menuAutoButton500.addChild(menuAutoCircle500,menuAutoText500),menuContainer.addChild(menuAutoTitle,menuAutoButton10,menuAutoButton25,menuAutoButton50,menuAutoButton100,menuAutoButton250,menuAutoButton500),menuAutoButton10.on("click",_autoPlayClick),menuAutoButton25.on("click",_autoPlayClick),menuAutoButton50.on("click",_autoPlayClick),menuAutoButton100.on("click",_autoPlayClick),menuAutoButton250.on("click",_autoPlayClick),menuAutoButton500.on("click",_autoPlayClick)}else if("settings"===name){var menuSettingsTitle=new createjs.Bitmap(loader.getResult("menuSettingsTitle")).set({name:"menuSettingsTitle",x:43,y:35});menuContainer.addChild(menuSettingsTitle)}createjs.Tween.get(menuContainer).to({x:978},300)}function _autoPlayClick(){events.trigger("initAutoplay",this.amount);var menuContainer=canvas.getStages().bonusStage.getChildByName("menuContainer"),overlay=canvas.getStages().bonusStage.getChildByName("overlay");createjs.Tween.get(menuContainer).to({x:1280},300),createjs.Tween.get(overlay).to({alpha:0},300).call(hideMenu)}function hideMenu(){var bonusStage=canvas.getStages().bonusStage,bonusStaticStage=canvas.getStages().bonusStaticStage;bonusStage.alpha=0,bonusStaticStage.alpha=0,bonusStaticStage.removeAllChildren(),bonusStage.removeAllChildren(),bonusStage.nextStage=canvas.getStages().gameStage}return{showMenu:showMenu,hideMenu:hideMenu}}(),preloaderManifest=[{id:"preloaderBG",src:"static/img/content/preloader/preloaderBG.png"},{id:"preloaderPlay",src:"static/img/content/preloader/preloaderPlay.png"},{id:"preloaderLogo",src:"static/img/content/preloader/preloaderLogo.png"},{id:"preloaderLogoBrands",src:"static/img/content/preloader/preloaderLogoBrands.png"},{id:"preloaderSprite",src:"static/img/content/preloader/preloaderSprite.json",type:"spritesheet"}],mainManifest=[{id:"fsBG",src:"static/img/content/bg/fsBG.png"},{id:"mainBG",src:"static/img/content/bg/mainBG.png"},{id:"gameBG",src:"static/img/content/bg/gameBG.png"},{id:"footerBG",src:"static/img/content/bg/footerBG.png"},{id:"gameMachine",src:"static/img/content/bg/gameMachine.png"},{id:"gameShadow",src:"static/img/content/bg/gameShadow.png"},{id:"transitionBG",src:"static/img/content/bg/transitionBG.png"},{id:"multiBG",src:"static/img/content/bg/multiBG.png"},{id:"vodolaz",src:"static/img/content/freespin/vodolaz.png"},{id:"sunduk",src:"static/img/content/freespin/sunduk.png"},{id:"osminog",src:"static/img/content/freespin/osminog.png"},{id:"freeSpinsText",src:"static/img/content/freespin/freeSpinsText.png"},{id:"bigWinText",src:"static/img/content/freespin/bigWinText.png"},{id:"totalWinText",src:"static/img/content/freespin/totalWinText.png"},{id:"totalWinFS",src:"static/img/content/freespin/totalWinFS.json",type:"spritesheet"},{id:"multiTitle",src:"static/img/content/freespin/multiTitle.png"},{id:"multiCoins",src:"static/img/content/freespin/multiCoins.png"},{id:"bonusBG",src:"static/img/content/bonuses/bonusBG.png"},{id:"bonusFG",src:"static/img/content/bonuses/bonusFG.png"},{id:"bonusWin",src:"static/img/content/bonuses/bonusWin.json",type:"spritesheet"},{id:"bonusWinResult",src:"static/img/content/bonuses/bonusWinResult.json",type:"spritesheet"},{id:"bonusFail",src:"static/img/content/bonuses/bonusFail.json",type:"spritesheet"},{id:"illuminators",src:"static/img/content/bonuses/illuminators.json",type:"spritesheet"},{id:"octopus",src:"static/img/content/bonuses/octopus.png"},{id:"light",src:"static/img/content/bonuses/light.png"},{id:"spinButton",src:"static/img/content/buttons/spin.json",type:"spritesheet"},{id:"autoButton",src:"static/img/content/buttons/auto.json",type:"spritesheet"},{id:"betButton",src:"static/img/content/buttons/bet.json",type:"spritesheet"},{id:"menuButton",src:"static/img/content/buttons/menu.json",type:"spritesheet"},{id:"soundButton",src:"static/img/content/buttons/sound.json",type:"spritesheet"},{id:"continueButton",src:"static/img/content/buttons/continue.json",type:"spritesheet"},{id:"menuBG",src:"static/img/content/menu/menuBG.png"},{id:"menuBetTitle",src:"static/img/content/menu/menuBetTitle.png"},{id:"menuAutoTitle",src:"static/img/content/menu/menuAutoTitle.png"},{id:"menuSettingsTitle",src:"static/img/content/menu/menuSettingsTitle.png"},{id:"menuBetLevel",src:"static/img/content/menu/menuBetLevel.png"},{id:"menuCoinValue",src:"static/img/content/menu/menuCoinValue.png"},{id:"menuDisc",src:"static/img/content/menu/menuDisc.png"},{id:"menuDivider",src:"static/img/content/menu/menuDivider.png"},{id:"menuMaxBet",src:"static/img/content/menu/menuMaxBet.json",type:"spritesheet"},{id:"menuMinusPlus",src:"static/img/content/menu/menuMinusPlus.json",type:"spritesheet"},{id:"menuBack",src:"static/img/content/menu/menuBack.json",type:"spritesheet"},{id:"linesDisc",src:"static/img/content/lines/linesDisc.json",type:"spritesheet"},{id:"linesSprite",src:"static/img/content/lines/linesSprite.json",type:"spritesheet"},{id:"winLineRect",src:"static/img/content/lines/winLineRect.png"},{id:"winTotalRect",src:"static/img/content/lines/winTotalRect.png"},{id:"winTotal",src:"static/img/content/lines/winTotal.json",type:"spritesheet"},{id:"elements",src:"static/img/content/elements/elements.json",type:"spritesheet"}],preloader=function(){function downloadManifest(){var loader=new createjs.LoadQueue(!0);loader.setMaxConnections(4),loader.loadManifest(preloaderManifest),loader.on("complete",showPreloader)}function showPreloader(event){stage=canvas.getStages().bonusStage;var loader=event.target,preloaderBG=new createjs.Bitmap(loader.getResult("preloaderBG")).set({name:"preloaderBG"}),preloaderLogo=new createjs.Bitmap(loader.getResult("preloaderLogo")).set({name:"preloaderLogo",x:261.5,y:65}),preloaderLogoBrands=new createjs.Bitmap(loader.getResult("preloaderLogoBrands")).set({name:"preloaderLogoBrands",x:1100,y:20,alpha:.75,scaleX:.75,scaleY:.75}),preloaderPlay=new createjs.Bitmap(loader.getResult("preloaderPlay")).set({name:"preloaderPlay",x:507.5,y:310,shadow:new createjs.Shadow("#C19433",0,0,15),alpha:0}),preloaderSprite=new createjs.Sprite(loader.getResult("preloaderSprite")).set({name:"preloaderSprite",x:225,y:450}),preloaderContainer=(new createjs.Container).set({name:"preloaderContainer"});preloaderContainer.addChild(preloaderBG,preloaderLogo,preloaderPlay,preloaderLogoBrands,preloaderSprite),stage.addChild(preloaderContainer),mainPreload(preloaderContainer)}function mainPreload(container){var sprite=container.getChildByName("preloaderSprite"),loader=new createjs.LoadQueue(!0);loader.setMaxConnections(20),loader.loadManifest(mainManifest),loader.on("fileload",handleFileLoad,loader,!1,{sprite:sprite}),loader.on("complete",handleLoadComplete,loader,!0,{container:container
})}function handleFileLoad(event,data){filesLoaded++;var sprite=data.sprite,filesNumber=mainManifest.length,framesNumber=sprite.spriteSheet.getNumFrames("run"),currentFrame=Math.ceil(filesLoaded/filesNumber*framesNumber)-1;sprite.gotoAndStop(currentFrame)}function handleLoadComplete(event,data){var container=data.container,sprite=container.getChildByName("preloaderSprite"),play=container.getChildByName("preloaderPlay");createjs.Tween.get(play).to({alpha:1},500),sprite.stop(),createjs.Tween.get(sprite,{loop:!0}).to({alpha:.8},400).to({alpha:1},400),loadResult=event.target,events.trigger("preloadComplete",loadResult),play.on("click",handlePlayClick,this,!0,{container:container})}function handlePlayClick(event,data){var container=data.container,game=document.querySelector("#game");canvas.launchFullScreen(game),createjs.Tween.get(container).to({alpha:0},1e3,createjs.Ease.circIn).call(function(){stage.removeAllChildren()})}function getLoadResult(){return utils.getData(loadResult)}var stage=void 0,loadResult=void 0,filesLoaded=0;return events.on("initPreloader",downloadManifest),{getLoadResult:getLoadResult}}(),spin=function(){function initWheels(data){wheels=data.wheels;var randomArray=[];wheels.forEach(function(column){var randomNumber=Math.round(Math.random()*(wheels.length-1));randomArray.push(randomNumber)}),currentScreen=_getScreenData(randomArray),events.on("preloadComplete",initScreen)}function initScreen(){drawScreen(currentScreen)}function _initGameContainer(x,y){gameContainer=(new createjs.Container).set({x:x,y:y,name:"gameContainer"});var stage=canvas.getStages().bgStage,gameMask=new createjs.Shape;gameMask.graphics.drawRect(x,y,960,540),gameContainer.mask=gameMask,stage.addChild(gameContainer)}function _getScreenData(inds,wls){inds=inds||indexes,wls=wls||wheels;var i=void 0,j=void 0,screen=[],wheelsLength=+wls[0].length;for(i=0;columnsNumber>i;i++)for(screen[i]=[],j=0;rowsNumber>j;j++)0===inds[i]&&0===j?screen[i][j]=wls[i][wheelsLength-1]:inds[i]>wheelsLength-4?wls[i][inds[i]+j-1]?screen[i][j]=wls[i][inds[i]+j-1]:screen[i][j]=wls[i][inds[i]+j-1-wheelsLength]:screen[i][j]=wls[i][inds[i]+j-1];return screen}function _createColumn(startArray,endArray){var i=void 0,loader=preloader.getLoadResult(),spriteSheet=loader.getResult("elements");if(endArray){var column=new createjs.SpriteContainer(spriteSheet);for(i=0;longRowsNumber>i;i++){if(rowsNumber>i){var elementNumber=endArray[i],element=new createjs.Sprite(spriteSheet,"normal-"+elementNumber).set({x:96,y:elementHeight*i+90,name:"gameElement"+i,regX:96,regY:90});element.snapToPixel=!0,column.addChild(element)}else if(i>=longRowsNumber-rowsNumber){var _elementNumber=startArray[i-longRowsNumber+rowsNumber],_element=new createjs.Sprite(spriteSheet,"normal-"+_elementNumber).set({x:96,y:elementHeight*i+90,name:"gameElement"+i,regX:96,regY:90});_element.snapToPixel=!0,column.addChild(_element)}else{var _elementNumber2=Math.ceil(10*Math.random()),_element2=new createjs.Sprite(spriteSheet,"blur-"+_elementNumber2).set({x:96,y:elementHeight*i+90,name:"gameElement"+i,regX:96,regY:90});_element2.snapToPixel=!0,column.addChild(_element2)}column.set({y:-elementHeight*(longRowsNumber-4)})}return column}var _column=new createjs.SpriteContainer(spriteSheet);for(i=0;rowsNumber>i;i++){var _elementNumber3=startArray[i],_element3=new createjs.Sprite(spriteSheet,"normal-"+_elementNumber3).set({y:elementHeight*i});_column.addChild(_element3),_column.set({y:-elementHeight})}return _column}function _requestSpin(){return new Promise(function(resolve,reject){var coinsValue=100*balance.getBalanceData().coinsValue,betValue=balance.getBalanceData().betValue;$.ajax({url:serviceUrl+"_Roll/"+login.getSessionID()+"/"+betValue+"/"+coinsValue,dataType:"JSONP",type:"GET",success:resolve,error:reject})})}function _requestReady(){return new Promise(function(resolve,reject){$.ajax({url:serviceUrl+"_Ready/"+login.getSessionID(),dataType:"JSONP",type:"GET",success:resolve,error:reject})})}function drawScreen(nextScreenData){gameContainer?gameContainer.removeAllChildren():_initGameContainer(100,52);var i=void 0;columns=[];var loader=preloader.getLoadResult();if(nextScreenData)for(i=0;columnsNumber>i;i++)columns[i]=_createColumn(nextScreenData[i]).set({x:elementWidth*i}),gameContainer.addChild(columns[i]);else{for(i=0;columnsNumber>i;i++){columns[i]=_createColumn(currentScreen[i],nextScreen[i]).set({x:elementWidth*i,name:"gameColumn"+i});var shadow=new createjs.Bitmap(loader.getResult("gameShadow")).set({x:(elementWidth+2)*i,y:0,alpha:0,name:"gameShadow"+i});gameContainer.addChild(columns[i],shadow)}animateSpin()}}function animateSpin(){var i=void 0,time=1e3,gameStage=canvas.getStages().bgStage;for(i=0;i<columns.length;i++){time+=400;var shadow=gameStage.getChildByName("gameContainer").getChildByName("gameShadow"+i);createjs.Tween.get(columns[i]).to({y:-elementHeight},time,createjs.Ease.getBackInOut(.5)).call(spinEnd.bind(null,i)),createjs.Tween.get(shadow).to({alpha:1},time/5,createjs.Ease.circIn).to({alpha:1},3*time/5).to({alpha:0},time/5)}}function fastSpin(){var i=void 0,time=500;if(!locked){var gameStage=canvas.getStages().bgStage;for(i=0;i<columns.length;i++){var shadow=gameStage.getChildByName("gameContainer").getChildByName("gameShadow"+i);createjs.Tween.get(columns[i],{override:!0}).to({y:-elementHeight},time,createjs.Ease.circOut).call(spinEnd.bind(null,i)),createjs.Tween.get(shadow,{override:!0}).to({alpha:0},time,createjs.Ease.circOut)}}locked=!0}function spinStart(){var autoSpin=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],freeSpin=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];autoSpinFlag=autoSpin,_requestSpin().then(function(data){if("Simple"===data.Type){if(events.trigger("spinStart",data),mode=data.Mode,scoreCents=data.ScoreCents,scoreCoins=data.ScoreCoins,winCoins=data.TotalWinCoins,winCents=data.TotalWinCents,winLines=data.LinesResult,"fsBonus"===mode){fsLevel=data.Multiplier.MultiplierStep,fsMulti=data.Multiplier.MultiplierValue,fsCount=data.TotalFreeSpins;var newFSObj={fsLevel:fsLevel,fsMulti:fsMulti,fsCount:fsCount};events.trigger("newFreeSpin",newFSObj)}if("undefined"!=typeof winLines[0]){var spinWinObject={winLines:winLines,winCoins:winCoins,winCents:winCents};events.trigger("spinWin",spinWinObject)}bonusLevelName=data.BonusResults[0],"StagesSlotBonus"===bonusLevelName?bonusFlag=!0:"FreeSpinBonus"===bonusLevelName&&(fsCount=data.FreeSpins,fsLevel=data.Multiplier.MultiplierStep,fsMulti=data.Multiplier.MultiplierValue,freeSpinFlag=!0),indexes=data.Indexes,nextScreen=freeSpin?_getScreenData(null,freeSpins.getWheels()):_getScreenData(),drawScreen(),currentScreen=nextScreen,inProgress=!0,fastSpinTimer=setTimeout(function(){fastSpinFlag=!0},750)}else if("StagesSlotBonus"===data.Type)bonusEnd=data.BonusEnd,bonusEnd&&(events.trigger("BonusEnd"),events.trigger("spinStart",data)),bonusValue=data.CurrentValue,bonusWinCents=data.CurrentWinCents,bonusWinCoins=data.CurrentWinCoins,bonusOldValues=data.OldValues,scoreCents=data.ScoreCents,scoreCoins=data.ScoreCoins;else if("MultiplierBonus"===data.Type){var multiData={coins:data.ValueCoins,cents:data.ValueCents};events.trigger("multiplierBonus",multiData)}else 0!==data.ErrorCode})}function spinEnd(i){4===i&&_requestReady().then(function(response){if(0===response.ErrorCode){inProgress=!1,fastSpinFlag=!1,winLines[0]?setTimeout(function(){locked=!1},300):locked=!1;var winCash=(winCents/100).toFixed(2),spinEndObject={autoSpinFlag:autoSpinFlag,freeSpinFlag:freeSpinFlag,winCash:winCash,winCoins:winCoins,scoreCoins:scoreCoins,scoreCents:scoreCents,fsCount:fsCount,fsLevel:fsLevel,fsMulti:fsMulti,mode:mode};events.trigger("spinEnd",spinEndObject),freeSpinFlag&&"fsBonus"!==mode&&setTimeout(function(){var fsDataObj={fsCount:fsCount,fsLevel:fsLevel,fsMulti:fsMulti};events.trigger("stopAutoplay",fsDataObj),events.trigger("initFreeSpins",fsDataObj)},500),bonusFlag&&(events.trigger("initBonusLevel"),lines.removeWinScreen(),lines.removeWinLines())}})}function getCurrentScreen(){return"undefined"!=typeof currentScreen?currentScreen:void 0}function getNextScreen(){return"undefined"!=typeof nextScreen?nextScreen:void 0}function getSpinState(){return{inProgress:inProgress,fastSpinFlag:fastSpinFlag,locked:locked}}function getGamePosition(){return new Promise(function(resolve,reject){createjs.Ticker.on("tick",function(event){if(gameContainer&&"undefined"!=typeof gameContainer.x&&"undefined"!=typeof gameContainer.y){event.remove();var result={x:gameContainer.x,y:gameContainer.y};resolve(result)}})})}function logWinLines(lin){}function stopFreeSpins(){freeSpinFlag=!1}var serviceUrl="http://gameservice.bossgs.org/slot/SlotService.svc/",elementWidth=192,elementHeight=180,columnsNumber=5,rowsNumber=5,longRowsNumber=40,mode=void 0,inProgress=void 0,fastSpinFlag=void 0,locked=void 0,fastSpinTimer=void 0,autoSpinFlag=void 0,freeSpinFlag=void 0,bonusFlag=void 0,fsCount=void 0,fsMulti=void 0,fsLevel=void 0,gameContainer=void 0,wheels=void 0,columns=void 0,currentScreen=void 0,nextScreen=void 0,winCoins=void 0,winCents=void 0,scoreCoins=void 0,scoreCents=void 0,indexes=void 0,winLines=void 0,bonusLevelName=void 0,bonusEnd=void 0,bonusValue=void 0,bonusOldValues=void 0,bonusWinCoins=void 0,bonusWinCents=void 0;return events.on("dataDownloaded",initWheels),events.on("initScreen",drawScreen),events.on("stopFreeSpins",stopFreeSpins),events.on("spinWin",logWinLines),{spinStart:spinStart,spinEnd:spinEnd,fastSpin:fastSpin,getCurrentScreen:getCurrentScreen,getNextScreen:getNextScreen,getSpinState:getSpinState,getGamePosition:getGamePosition,_getScreenData:_getScreenData,drawScreen:drawScreen}}();